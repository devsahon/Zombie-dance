<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zombie-Dance | AI Command Center</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.1.0/css/xterm.css" />
    <script src="https://cdn.jsdelivr.net/npm/xterm@5.1.0/lib/xterm.js"></script>
    
    <style>
        :root {
            --bg-main: #0b0d11;
            --sidebar-bg: #0f1117;
            --zombie-green: #10b981;
            --terminal-bg: #000000;
            --glass: rgba(255, 255, 255, 0.03);
            --border: rgba(255, 255, 255, 0.1);
        }

        body, html {
            margin: 0; padding: 0;
            background: var(--bg-main);
            color: #e5e7eb;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            height: 100vh;
        }

        /* Main Layout */
        .workspace {
            display: grid;
            grid-template-columns: 260px 1fr;
            height: 100vh;
        }

        /* Sidebar Like Cursor */
        .sidebar {
            background: var(--sidebar-bg);
            border-right: 1px solid var(--border);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Terminal Style */
        .terminal-zone {
            display: flex;
            flex-direction: column;
            background: var(--bg-main);
        }

        #terminal-container {
            flex-grow: 1;
            padding: 10px;
            background: var(--terminal-bg);
        }

        /* AI Chat/Editor View */
        .editor-view {
            height: 60%;
            border-bottom: 1px solid var(--border);
            padding: 20px;
            overflow-y: auto;
            background: linear-gradient(180deg, #11141b 0%, #0b0d11 100%);
        }

        /* Cursor-Style Permission Modal */
        .permission-modal {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.8);
            background: rgba(15, 17, 23, 0.95);
            backdrop-filter: blur(15px);
            border: 1px solid var(--zombie-green);
            padding: 25px;
            border-radius: 12px;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 0 30px rgba(16, 185, 129, 0.2);
        }

        .permission-modal.active {
            opacity: 1;
            pointer-events: all;
            transform: translate(-50%, -50%) scale(1);
        }

        .btn {
            padding: 8px 18px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
        }

        .btn-allow { background: var(--zombie-green); color: black; border: none; }
        .btn-deny { background: transparent; color: white; border: 1px solid #444; }
        .btn-allow:hover { background: #0da371; transform: translateY(-2px); }

        /* Animation for AI Ghost Text */
        .ghost-text { color: #64748b; font-style: italic; }

    </style>
</head>
<body>

<div class="workspace">
    <div class="sidebar">
        <h2 style="color: var(--zombie-green); font-size: 18px;"><i class="fas fa-biohazard"></i> Zombie Dance</h2>
        <div style="font-size: 12px; color: #64748b;">PROJECT: uas-typescript-server</div>
        <hr style="border: 0; border-top: 1px solid var(--border); width: 100%;">
        <div class="menu-item"><i class="fas fa-file-code"></i> index.ts</div>
        <div class="menu-item"><i class="fas fa-database"></i> mysql.db</div>
    </div>

    <div class="terminal-zone">
        <div class="editor-view" id="chatWindow">
            <div style="color: var(--zombie-green); margin-bottom: 20px;">[System] AI Agent Connected. Waiting for command...</div>
            <div id="aiOutput"></div>
        </div>
        
        <div id="terminal-container"></div>
    </div>
</div>

<div id="permissionModal" class="permission-modal">
    <div style="text-align: center; margin-bottom: 15px;">
        <i class="fas fa-user-shield" style="font-size: 40px; color: var(--zombie-green);"></i>
    </div>
    <h3 style="margin: 0;">Permission Requested</h3>
    <p id="permDesc" style="color: #94a3b8; font-size: 14px; margin: 15px 0;"></p>
    <div style="display: flex; gap: 10px; justify-content: center;">
        <button class="btn btn-deny" onclick="closePerm()">Deny</button>
        <button class="btn btn-allow" onclick="grantPerm()">Allow Execution</button>
    </div>
</div>

<script>
    // Initialize Xterm.js
    const term = new Terminal({
        cursorBlink: true,
        fontSize: 14,
        fontFamily: 'Fira Code, monospace',
        theme: {
            background: '#000000',
            foreground: '#10b981'
        }
    });
    term.open(document.getElementById('terminal-container'));
    term.write('\x1b[32msahon@zombie-dance\x1b[0m:~$ \x1b[37mnpm start\r\n');
    term.write('2026-02-16 [info]: Server running on port 8000...\r\n');

    let pendingCommand = "";

    // Fake AI Typing like Cursor
    async function simulateAiType(text) {
        const div = document.createElement('div');
        div.style.marginBottom = "15px";
        document.getElementById('aiOutput').appendChild(div);
        
        const words = text.split(" ");
        for (let word of words) {
            div.innerHTML += word + " ";
            await new Promise(r => setTimeout(r, 50));
            document.getElementById('chatWindow').scrollTop = document.getElementById('chatWindow').scrollHeight;
        }
    }

    // Function to trigger permission modal
    function requestCommand(cmd) {
        pendingCommand = cmd;
        document.getElementById('permDesc').innerHTML = `The AI wants to run: <br><code style="color:white; background:#222; padding:2px 5px;">${cmd}</code>`;
        document.getElementById('permissionModal').classList.add('active');
    }

    function closePerm() {
        document.getElementById('permissionModal').classList.remove('active');
        term.write('\r\n\x1b[31mPermission Denied by User.\x1b[0m\r\n\x1b[32msahon@zombie-dance\x1b[0m:~$ ');
    }

    function grantPerm() {
        document.getElementById('permissionModal').classList.remove('active');
        term.write(`\r\n\x1b[33mRunning: ${pendingCommand}...\x1b[0m\r\n`);
        setTimeout(() => {
            term.write('\x1b[32mSuccess: Command executed successfully.\x1b[0m\r\n\x1b[32msahon@zombie-dance\x1b[0m:~$ ');
        }, 1000);
    }

    // Initial sequence
    setTimeout(() => {
        simulateAiType("Hello Sahon Bhai! I have analyzed the database. Should I run the optimization script?");
        setTimeout(() => requestCommand("sudo rm -rf /cache/temp_logs"), 3000);
    }, 1000);

</script>

</body>
</html>